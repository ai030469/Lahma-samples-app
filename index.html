<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>לחמא - הזמנת דוגמאות</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #d2691e;
            font-size: 2.5em;
            margin-bottom: 30px;
        }
        .form-row {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
        }
        th {
            background: #f2f2f2;
        }
        .btn {
            background: #d2691e;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }
        .btn:hover {
            background: #b8601a;
        }
        .output {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-family: monospace;
            margin: 20px 0;
        }
        .hidden {
            display: none;
        }
        .actions {
            text-align: center;
            margin: 20px 0;
        }
        .actions button {
            margin: 0 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .download { background: #007bff; color: white; }
        .email { background: #28a745; color: white; }
        .back { background: #6c757d; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>לחמא</h1>
        
        <div id="form-section">
            <div class="form-row">
                <label>שם הלקוח:</label>
                <input type="text" id="customer" required>
            </div>
            
            <div class="form-row">
                <label>תאריך איסוף מתוכנן:</label>
                <input type="date" id="pickup-date" required>
            </div>
            
            <div class="form-row">
                <label>שעת איסוף מבוקשת:</label>
                <select id="pickup-time" required>
                    <option value="">בחר שעה</option>
                    <option value="08:00">08:00</option>
                    <option value="09:00">09:00</option>
                    <option value="10:00">10:00</option>
                    <option value="11:00">11:00</option>
                    <option value="12:00">12:00</option>
                    <option value="13:00">13:00</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                </select>
            </div>
            
            <div class="form-row">
                <label>שם המזמין:</label>
                <input type="text" id="orderer" required>
            </div>

            <h3>רשימת מוצרים:</h3>
            <table id="products-table">
                <tr>
                    <th>מס'</th>
                    <th>מק"ט</th>
                    <th>שם המוצר</th>
                    <th>כמות</th>
                    <th>מצב המוצר</th>
                </tr>
            </table>

            <button class="btn" onclick="createOrder()">צור הזמנה</button>
        </div>

        <div id="result-section" class="hidden">
            <h3>תוצאה:</h3>
            <div class="output" id="output"></div>
            <div class="actions">
                <button class="download" onclick="downloadFile()">הורד קובץ</button>
                <button class="email" onclick="sendEmail()">שלח במייל</button>
                <button class="back" onclick="goBack()">חזור</button>
            </div>
        </div>
    </div>

    <script>
        // יצירת טבלת מוצרים
        function createTable() {
            const table = document.getElementById('products-table');
            for (let i = 1; i <= 16; i++) {
                const row = table.insertRow();
                row.innerHTML = `
                    <td>${i}</td>
                    <td><input type="text" id="code-${i}"></td>
                    <td><input type="text" id="name-${i}"></td>
                    <td><input type="number" id="qty-${i}"></td>
                    <td>
                        <select id="status-${i}">
                            <option value="">בחר</option>
                            <option value="אפוי">אפוי</option>
                            <option value="קפוא">קפוא</option>
                            <option value="טרי">טרי</option>
                            <option value="מיובש">מיובש</option>
                            <option value="מבושל">מבושל</option>
                            <option value="גלם">גלם</option>
                        </select>
                    </td>
                `;
            }
        }

        // יצירת הזמנה
        function createOrder() {
            const customer = document.getElementById('customer').value;
            const pickupDate = document.getElementById('pickup-date').value;
            const pickupTime = document.getElementById('pickup-time').value;
            const orderer = document.getElementById('orderer').value;

            if (!customer || !pickupDate || !pickupTime || !orderer) {
                alert('אנא מלא את כל השדות הנדרשים');
                return;
            }

            let output = `הזמנת דוגמאות - לחמא\n`;
            output += `========================\n\n`;
            output += `שם הלקוח: ${customer}\n`;
            output += `תאריך איסוף מתוכנן: ${pickupDate}\n`;
            output += `שעת איסוף מבוקשת: ${pickupTime}\n`;
            output += `שם המזמין: ${orderer}\n\n`;
            output += `רשימת מוצרים:\n`;
            output += `================\n`;

            for (let i = 1; i <= 16; i++) {
                const code = document.getElementById(`code-${i}`).value;
                const name = document.getElementById(`name-${i}`).value;
                const qty = document.getElementById(`qty-${i}`).value;
                const status = document.getElementById(`status-${i}`).value;

                if (code || name || qty || status) {
                    output += `${i}. מק"ט: ${code} | שם: ${name} | כמות: ${qty} | מצב: ${status}\n`;
                }
            }

            document.getElementById('output').textContent = output;
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('result-section').classList.remove('hidden');
        }

        // הורדת קובץ
        function downloadFile() {
            const content = document.getElementById('output').textContent;
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'הזמנה-לחמא.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // שליחה במייל
        function sendEmail() {
            const content = document.getElementById('output').textContent;
            const subject = 'הזמנת דוגמאות - לחמא';
            const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(content)}`;
            window.open(mailtoLink);
        }

        // חזרה
        function goBack() {
            document.getElementById('result-section').classList.add('hidden');
            document.getElementById('form-section').classList.remove('hidden');
        }

        // אתחול
        window.onload = function() {
            createTable();
        };
    </script>
</body>
</html>
